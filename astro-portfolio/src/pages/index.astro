---
import Layout from "../layouts/Layout.astro";

// Deep terminal database
const db = {
  subjects: [
    { id: "JOURNEY_001", title: "MY JOURNEY", category: "PERSONAL", classification: "PUBLIC", content: ["15 years in food service - learned work ethic, teamwork, customer service", "20 years curious about computers - tinkering, researching, learning", "6 months full-time Linux user - NixOS convert", "Pivoted to web dev through AI-assisted learning", "Building skills every day, open to opportunities", "Philosophy: Never too late to change paths"], related: ["PERSONAL", "CAREER"] },
    { id: "HYVRS_001", title: "HOYOVERSE", category: "INSPIRATION", classification: "PUBLIC", content: ["Chinese game developer known for Genshin Impact, Honkai Star Rail, Zenless Zone Zero.", "Key design principles:", "‚Ä¢ Non-intrusive UI with progressive disclosure", "‚Ä¢ Anticipatory animation sequencing", "‚Ä¢ Secondary motion polish (particles, glows)", "‚Ä¢ Character-first special moves", "‚Ä¢ Dynamic tooltip reveals", "Reference: UI/UX patterns studied for portfolio redesign."], related: ["GAME_DESIGN", "ANIMATION", "UI_UX"] },
    { id: "PHIL_042", title: "PHILOSOPHY", category: "KNOWLEDGE", classification: "INTERNAL", content: ["EXISTENTIALISM: Freedom through code creation", "DETERMINISM: NixOS declarative systems", "DIALECTICS: Iterative development cycles", "PHENOMENOLOGY: User experience as lived reality", "STOICISM: Embracing technical constraints", "TRANSHUMANISM: Human-AI symbiosis", "Application: Design decisions grounded in first principles."], related: ["DESIGN_PHILOSOPHY", "DEVELOPMENT"] },
    { id: "VRCH_107", title: "VRCHAT", category: "INSPIRATION", classification: "RESTRICTED", content: ["Social VR platform observations:", "‚Ä¢ Avatar expression as identity projection", "‚Ä¢ Spatial audio design for immersion", "‚Ä¢ World-building with Unity SDK", "‚Ä¢ Community-driven content creation", "‚Ä¢ Performance optimization for VR", "Note: Explored avatar creation pipeline."], related: ["3D_GRAPHICS", "UNITY", "SOCIAL_DESIGN"] },
    { id: "NIX_999", title: "NIXOS PHILOSOPHY", category: "TECHNOLOGY", classification: "TOP SECRET", content: ["DECLARATIVE CONFIGURATION MANIFESTO", "Core tenets:", "1. Reproducibility over convenience", "2. Atomic upgrades and rollbacks", "3. Declarative system configuration", "4. Reliable package management", "5. Multi-environment support", "Current deployment: Full workstation", "Learning curve: Steep but worth it", "Switched: 6 months ago"], related: ["DEVOPS", "DECLARATIVE_SYSTEMS"] },
    { id: "ANIM_033", title: "ANIME", category: "INSPIRATION", classification: "PUBLIC", content: ["GHOST IN THE SHELL: Transhumanism, tech philosophy", "EVANGELION: Psychological depth, mecha aesthetics", "COWBOY BEBOP: Style, music, episodic narrative", "STEINS;GATE: Time manipulation, cause/effect", "PSYCHO-PASS: Surveillance society themes", "Serial Experiments LAIN: Internet consciousness", "Applied: Dark color schemes, cyberpunk aesthetics"], related: ["VISUAL_DESIGN", "STORYTELLING"] },
    { id: "GAME_256", title: "GAMING HISTORY", category: "PERSONAL", classification: "PUBLIC", content: ["1998: Fallout - Choice & consequence", "2000: Deus Ex - Immersive sim design", "2004: WoW - Social systems, progression", "2011: Dark Souls - Environmental storytelling", "2017: BOTW - Emergent gameplay", "2020: Genshin - Gacha + open world", "2023: BG3 - CRPG renaissance", "Total hours: [CLASSIFIED]"], related: ["GAME_DESIGN", "STORYTELLING"] },
    { id: "TECH_001", title: "STACK", category: "TECHNOLOGY", classification: "INTERNAL", content: ["LANGUAGES: TypeScript, Go, Python, Rust", "FRONTEND: React, Astro, Tailwind, GSAP", "BACKEND: Node.js, Express, FastAPI", "DATABASE: PostgreSQL, Redis, SQLite", "INFRA: NixOS, Docker, Kubernetes", "AI/ML: OpenAI, Anthropic, Local LLMs"], related: ["PROGRAMMING", "INFRASTRUCTURE"] },
    { id: "TERM_GLOS", title: "GLOSSARY", category: "REFERENCE", classification: "PUBLIC", content: ["DECK: Development workstation", "ICE: Security measures / firewalls", "RUN: Active development session", "CHROME: User interface elements", "DARK: Undocumented features", "WAREZ: Open source tools", "GRID: Network / internet", "MEATSPACE: Physical reality", "WIZARD: Expert programmer"], related: ["TERMINOLOGY"] },
    { id: "CYBR_2077", title: "CYBERPUNK", category: "INSPIRATION", classification: "RESTRICTED", content: ["High tech, low life aesthetic", "Neuromancer - William Gibson", "Snow Crash - Neal Stephenson", "Blade Runner - Visual language", "Akira - Neo-Tokyo aesthetics", "Applied: Neon accents, dark themes, terminal UIs"], related: ["VISUAL_DESIGN", "ANIME"] },
    { id: "AI_001", title: "AI INTEGRATION", category: "TECHNOLOGY", classification: "TOP SECRET", content: ["ACTIVE SYSTEMS:", "‚Ä¢ Claude (Anthropic) - Primary coding assistant", "‚Ä¢ GPT-4 - Research and analysis", "‚Ä¢ Local LLMs - Privacy-sensitive tasks", "‚Ä¢ OpenCode - Terminal-based AI TUI", "Philosophy: AI as force multiplier, not replacement"], related: ["DEVELOPMENT", "PHILOSOPHY"] },
    { id: "MUSC_420", title: "MUSIC", category: "PERSONAL", classification: "PUBLIC", content: ["Coding soundtracks:", "‚Ä¢ Synthwave (Perturbator, Carpenter Brut)", "‚Ä¢ Lo-fi hip hop (focus sessions)", "‚Ä¢ Electronic (Daft Punk, Justice)", "‚Ä¢ Post-rock (Explosions in the Sky)", "‚Ä¢ J-Pop/Rock (Anime OPs)"], related: ["PERSONAL"] },
    { id: "SEC_101", title: "SECURITY", category: "TECHNOLOGY", classification: "RESTRICTED", content: ["OPSEC Practices:", "‚Ä¢ Full disk encryption (LUKS)", "‚Ä¢ GPG for commits and emails", "‚Ä¢ Hardware security keys (YubiKey)", "‚Ä¢ Network isolation (VLANs)", "‚Ä¢ Regular security audits"], related: ["DEVOPS", "INFRASTRUCTURE"] },
  ],
  categories: ["INSPIRATION", "KNOWLEDGE", "TECHNOLOGY", "PERSONAL", "REFERENCE"],
  classifications: ["PUBLIC", "INTERNAL", "RESTRICTED", "TOP SECRET"],
};

const projects = [
  { title: "This Portfolio", desc: "Astro + GSAP + Terminal minigame", status: "active", icon: "üåê", span: "2x2", tech: ["Astro", "GSAP", "NixOS"], metric: "This site" },
  { title: "Troves & Coves", desc: "Crystal jewelry e-commerce", status: "learning", icon: "üíé", span: "1x1", tech: ["React", "Stripe"], metric: "WIP" },
  { title: "Local Cleaning", desc: "Quote calculator", status: "learning", icon: "üßπ", span: "1x1", tech: ["React", "TS"], metric: "Practice" },
  { title: "Synapse", desc: "NixOS configs", status: "active", icon: "‚ö°", span: "2x1", tech: ["NixOS"], metric: "My setup" },
  { title: "Hair@Home", desc: "Static site", status: "learning", icon: "‚úÇÔ∏è", span: "1x1", tech: ["Hugo"], metric: "Practice" },
];

const skills = ["TypeScript", "React", "Node.js", "NixOS", "Tailwind", "Astro", "Python", "Git", "Linux", "Docker"];
---

<Layout title="Reverb256 | Developer">
  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 px-6 py-3 bg-[var(--base00)]/80 backdrop-blur-md border-b border-[var(--base02)]">
    <div class="max-w-6xl mx-auto flex items-center justify-between">
      <a href="#" class="font-bold text-lg text-[var(--base07)] hover:text-[var(--base09)] transition-colors">R256://</a>
      <div class="flex items-center gap-6">
        <a href="#projects" class="text-sm text-[var(--base05)] hover:text-[var(--base07)] link-underline">Projects</a>
        <a href="#about" class="text-sm text-[var(--base05)] hover:text-[var(--base07)] link-underline">About</a>
        <a href="#contact" class="text-sm text-[var(--base05)] hover:text-[var(--base07)] link-underline">Contact</a>
        <a href="https://github.com/reverb256" target="_blank" rel="noopener" class="btn-accent text-xs py-1.5 px-4">GitHub</a>
      </div>
    </div>
  </nav>

  <!-- Hero with Terminal -->
  <section class="min-h-screen pt-16 px-6 flex items-center">
    <div class="max-w-6xl mx-auto w-full grid lg:grid-cols-2 gap-8 items-center">
      <!-- Left: Info -->
      <div class="space-y-6" data-animate="fade-up">
        <div class="inline-flex items-center gap-2 px-3 py-1 glass text-xs text-[var(--base05)]">
          <span class="w-2 h-2 rounded-full bg-[var(--base0B)] animate-pulse"></span>
          Open to Opportunities
        </div>
        <h1 class="text-5xl md:text-6xl font-bold leading-tight" style="background: linear-gradient(135deg, #ff9f5c 0%, #6ee7de 100%); background-clip: text; -webkit-background-clip: text; color: transparent;">
          Reverb256
        </h1>
        <p class="text-lg text-[var(--base05)] max-w-md">
          <span class="text-[var(--base09)]">15 years</span> in food service. <span class="text-[var(--base0D)]">20 years</span> curious about tech. Now pivoting to web development through <span class="text-[var(--base09)]">AI-assisted learning</span>.
        </p>
        <div class="flex gap-4">
          <a href="#projects" class="btn-accent">View Projects</a>
          <a href="#contact" class="btn-outline">Get in Touch</a>
        </div>
        <div class="flex gap-6 pt-4 text-sm">
          <div><span class="text-2xl font-bold text-[var(--base09)]">15</span><br><span class="text-[var(--base04)]">Years Working</span></div>
          <div><span class="text-2xl font-bold text-[var(--base09)]">20</span><br><span class="text-[var(--base04)]">Years Tech Curious</span></div>
          <div><span class="text-2xl font-bold text-[var(--base09)]">6mo</span><br><span class="text-[var(--base04)]">Full Linux</span></div>
        </div>
      </div>
      
      <!-- Right: Terminal -->
      <div data-animate="fade-up" data-delay="0.2" class="relative" style="z-index: 20;">
        <div id="term-wrapper" class="overflow-hidden relative rounded-lg" style="background: var(--base00); border: 1px solid var(--base03); z-index: 30; font-family: 'Fira Code', 'JetBrains Mono', 'SF Mono', Consolas, monospace;">
          
          <!-- Terminal output -->
          <div id="term-output" class="text-sm p-4 min-h-[300px] max-h-[400px] overflow-y-auto" style="font-family: inherit; line-height: 1.6;">
            <p style="color: var(--base05);">Welcome to the R256 knowledge database.</p>
            <p style="color: var(--base05);">Type <span style="color: var(--base0D);">help</span> for commands.</p>
          </div>
          
          <!-- Terminal input with blinking cursor -->
          <div class="flex items-center px-4 py-2 border-t" style="border-color: var(--base02); background: rgba(0,0,0,0.3); font-family: inherit;">
            <span style="color: var(--base0B);">‚ùØ</span>
            <span>&nbsp;</span>
            <input type="text" id="term-input" class="flex-grow bg-transparent border-none outline-none" style="color: var(--base06); font-family: inherit; caret-color: var(--base0D);" placeholder="type a command..." autocomplete="off" spellcheck="false" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Projects -->
  <section id="projects" class="px-6 py-12">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-2xl font-bold mb-6 text-[var(--base06)]">// Projects</h2>
      <div data-stagger class="grid grid-cols-2 md:grid-cols-4 gap-3 auto-rows-[120px]">
        {projects.map((p) => (
          <a href={`https://github.com/reverb256/${p.title.toLowerCase().replace(/\s+/g, '-')}`} target="_blank" rel="noopener" data-stagger-item class={`bento-item group flex flex-col span-${p.span}`}>
            <div class="flex items-center justify-between mb-1">
              <span class="text-xl">{p.icon}</span>
              <span class={`px-1.5 py-0.5 text-[8px] rounded font-medium uppercase ${p.status === 'live' ? 'badge-live' : 'badge-active'}`}>{p.status}</span>
            </div>
            <h3 class="text-sm font-bold text-[var(--base07)] group-hover:text-[var(--base09)] transition-colors">{p.title}</h3>
            <p class="text-[10px] text-[var(--base05)] flex-grow">{p.desc}</p>
            <div class="flex gap-1 mt-auto">{p.tech.map(t => <span class="text-[8px] px-1.5 py-0.5 bg-[var(--base02)] rounded text-[var(--base05)]">{t}</span>)}</div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="px-6 py-12">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-2xl font-bold mb-6 text-[var(--base06)]">// About</h2>
      <div class="grid md:grid-cols-2 gap-4">
        <div class="glass p-6">
          <h3 class="text-sm font-bold text-[var(--base07)] mb-4">My Story</h3>
          <p class="text-sm text-[var(--base05)] leading-relaxed">
            Spent <span class="text-[var(--base09)]">15 years in food service</span> learning the value of hard work, teamwork, and showing up every day. Meanwhile, I was always curious about computers ‚Äî <span class="text-[var(--base0D)]">20 years of tinkering, researching, and dabbling with Linux</span> on the side.
          </p>
          <p class="text-sm text-[var(--base05)] leading-relaxed mt-3">
            6 months ago I switched to full-time Linux (NixOS). Now I'm pivoting to web development through <span class="text-[var(--base09)]">AI-assisted learning</span> ‚Äî using AI tools to accelerate my learning and build real projects.
          </p>
          <p class="text-sm text-[var(--base05)] leading-relaxed mt-3">
            <strong>Looking for:</strong> Junior developer roles, apprenticeships, or any opportunity to learn and contribute.
          </p>
        </div>
        <div class="glass p-6">
          <h3 class="text-sm font-bold text-[var(--base07)] mb-4">What I Bring</h3>
          <div class="flex flex-wrap gap-2">
            {["Work ethic", "Eager to learn", "Team player", "Problem solver", "Patient", "Reliable"].map(f => <span class="text-xs px-3 py-1.5 border border-[var(--base03)] rounded-full text-[var(--base05)] hover:border-[var(--base09)] hover:text-[var(--base09)] transition-all cursor-default">{f}</span>)}
          </div>
          <h3 class="text-sm font-bold text-[var(--base07)] mb-4 mt-6">Learning</h3>
          <div class="flex flex-wrap gap-2">{skills.map(s => <span class="text-xs px-3 py-1 bg-[var(--base02)] rounded text-[var(--base06)] hover:text-[var(--base09)] transition-colors cursor-default hover:scale-105 transform">{s}</span>)}</div>
          <div class="mt-4 pt-4 border-t border-[var(--base02)] text-xs text-[var(--base05)] space-y-1">
            <div>OS: NixOS (6 months and counting)</div>
            <div>Editor: Neovim (still learning)</div>
            <div>Method: AI-assisted coding</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="px-6 py-12">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-2xl font-bold mb-6 text-[var(--base06)]">// Contact</h2>
      <div class="glass p-6 flex flex-wrap items-center justify-between gap-4">
        <div>
          <p class="text-sm text-[var(--base05)] mb-4">Open to junior roles, internships, or just chatting about tech. Let's connect!</p>
          <div class="flex gap-3">
            <a href="mailto:contact@reverb256.dev" class="btn-accent text-sm">Email</a>
            <a href="https://github.com/reverb256" target="_blank" rel="noopener" class="btn-outline text-sm">GitHub</a>
          </div>
        </div>
        <div class="text-right text-xs text-[var(--base04)]">
          <div>Winnipeg, Canada</div>
          <div>Open to remote work</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="px-6 py-4 border-t border-[var(--base02)]">
    <div class="max-w-6xl mx-auto flex items-center justify-between text-[10px] text-[var(--base04)]">
      <span>¬© 2026 Reverb256</span>
      <span>Astro + GSAP + NixOS + Base24</span>
      <span class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-[var(--base0B)] animate-pulse"></span> All Systems Operational</span>
    </div>
  </footer>
</Layout>

<script define:vars={{ db }}>
  // ====== TERMINAL MODE STATE ======
  const output = document.getElementById('term-output');
  const input = document.getElementById('term-input');
  const termWrapper = document.getElementById('term-wrapper');
  
  // ====== FISH SHELL FEATURES ======
  const autocompleteSuggestions = {
    'help': 'help',
    'list': 'list',
    'read': 'read ',
    'random': 'random',
    'search': 'search ',
    'clear': 'clear',
    'matrix': 'matrix',
    'about': 'about'
  };
  
  let currentSuggestion = '';
  let suggestionIndex = 0;
  
  function highlightSyntax(text) {
    // Commands
    text = text.replace(/\b(help|list|read|random|search|clear|matrix|about)\b/g, '<span style="color: var(--base0D);">$1</span>');
    // Arguments
    text = text.replace(/\[([^\]]+)\]/g, '<span style="color: var(--base0C);">[$1]</span>');
    return text;
  }
  
  function showAutocomplete() {
    if (currentSuggestion && input.value.startsWith(currentSuggestion)) {
      const suggestionText = currentSuggestion.substring(input.value.length);
      if (suggestionText) {
        const suggestionSpan = document.createElement('span');
        suggestionSpan.style.cssText = 'color: var(--base04); display: inline;';
        suggestionSpan.textContent = suggestionText;
        suggestionSpan.id = 'autocomplete-suggestion';
        
        // Remove existing suggestion
        const existingSuggestion = document.getElementById('autocomplete-suggestion');
        if (existingSuggestion) existingSuggestion.remove();
        
        // Insert suggestion after input
        input.parentNode.insertBefore(suggestionSpan, input.nextSibling);
      }
    }
  }
  
  function print(text, style = 'color: var(--base0B);') {
    const line = document.createElement('div');
    line.style.cssText = style + ' margin-top: 0.25rem;';
    line.innerHTML = highlightSyntax(text);
    output.appendChild(line);
    output.scrollTop = output.scrollHeight;
    
    // Glitch effect
    line.style.animation = 'glitch 0.1s ease-out';
    setTimeout(() => line.style.animation = '', 100);
  }
  
  function typeEffect(text, element, speed = 20) {
    return new Promise(resolve => {
      let i = 0;
      const interval = setInterval(() => {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          output.scrollTop = output.scrollHeight;
        } else {
          clearInterval(interval);
          resolve();
        }
      }, speed);
    });
  }
  
  window.execCmd = async function(cmd) {
    const [command, ...args] = cmd.trim().toLowerCase().split(/\s+/);
    const arg = args.join('_').toUpperCase();
    
    print(`<span style="color: var(--base05);">> ${cmd}</span>`);
    
    await new Promise(r => setTimeout(r, 100));
    
    switch(command) {
      case 'help':
        print(`<span style="color: var(--base0D);">AVAILABLE COMMANDS:</span>
  <span style="color: var(--base06);">help</span>      - Display help
  <span style="color: var(--base06);">list</span>      - List all subjects
  <span style="color: var(--base06);">read [ID]</span> - Read subject file
  <span style="color: var(--base06);">random</span>    - Random subject
  <span style="color: var(--base06);">search [q]</span> - Search database
  <span style="color: var(--base06);">clear</span>     - Clear terminal
  <span style="color: var(--base06);">matrix</span>    - Easter egg
  <span style="color: var(--base06);">about</span>     - About system`);
        break;
        
      case 'list':
        print(`<span style="color: var(--base0D);">DATABASE SUBJECTS</span>`);
        db.subjects.forEach(s => {
          const color = s.classification === 'TOP SECRET' ? 'var(--base08)' : 
                       s.classification === 'RESTRICTED' ? 'var(--base0A)' : 'var(--base0B)';
          print(`  <span style="color: var(--base06);">${s.id}</span> - ${s.title} [<span style="color: ${color};">${s.classification}</span>]`);
        });
        break;
        
      case 'read':
        if (!arg) {
          print(`<span style="color: var(--base08);">ERROR: Specify ID. Usage: read [ID]</span>`);
          break;
        }
        const subject = db.subjects.find(s => s.id === arg);
        if (!subject) {
          print(`<span style="color: var(--base08);">ERROR: '${arg}' not found</span>`);
          break;
        }
        const border = subject.classification === 'TOP SECRET' ? 'var(--base08)' : 'var(--base0D)';
        print(`<span style="color: ${border};">SUBJECT: ${subject.title}</span>`);
        print(`<span style="color: var(--base05);">ID: ${subject.id} | ${subject.category}</span>`);
        print(`<span style="color: ${border};">CLASS: ${subject.classification}</span>`);
        subject.content.forEach(line => print(`  ${line}`));
        break;
        
      case 'random':
        const rand = db.subjects[Math.floor(Math.random() * db.subjects.length)];
        execCmd(`read ${rand.id}`);
        break;
        
      case 'search':
        if (!arg) {
          print(`<span style="color: var(--base0A);">Usage: search [query]</span>`);
          break;
        }
        const results = db.subjects.filter(s => 
          s.title.toLowerCase().includes(arg.toLowerCase()) ||
          s.content.some(c => c.toLowerCase().includes(arg.toLowerCase()))
        );
        if (results.length === 0) {
          print(`<span style="color: var(--base0A);">No results for '${arg}'</span>`);
        } else {
          print(`<span style="color: var(--base0D);">Found ${results.length} result(s):</span>`);
          results.forEach(s => print(`  <span style="color: var(--base06);">${s.id}</span> - ${s.title}`));
        }
        break;
        
      case 'matrix':
        print(`<span style="color: var(--base0B);">Wake up, Neo...</span>`);
        print(`<span style="color: var(--base0B);">The Matrix has you...</span>`);
        break;
        
      case 'about':
        print(`<span style="color: var(--base0D);">REVERB256 DATABASE TERMINAL</span>
Version: 2.56.0
Build: 2026.02.17
Engine: Astro + Vanilla JS
Theme: Base24 Compliant
Purpose: Knowledge repository`);
        break;
        
      case 'clear':
        output.innerHTML = `<pre style="color: var(--base0B); opacity: 0.8; font-size: 0.75rem;">
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë     ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó      ‚ïë
‚ïë     ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë      ‚ïë
‚ïë     ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë      ‚ïë
‚ïë‚ñà‚ñà   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë      ‚ïë
‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ïë
‚ïë ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù</pre>
<p style="margin-top: 0.75rem; color: var(--base05);">Terminal cleared. Type <span style="color: var(--base0B);">help</span>.</p>`;
        break;
        
      default:
        print(`<span style="color: var(--base08);">UNKNOWN: '${command}'</span>`);
        print(`<span style="color: var(--base05);">Type 'help' for commands.</span>`);
    }
  };
  
  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      const cmd = input.value.trim();
      if (cmd) {
        execCmd(cmd);
        input.value = '';
        // Clear autocomplete suggestion
        const suggestion = document.getElementById('autocomplete-suggestion');
        if (suggestion) suggestion.remove();
      }
    } else if (e.key === 'Tab') {
      e.preventDefault();
      if (currentSuggestion && input.value.startsWith(currentSuggestion)) {
        input.value = currentSuggestion;
        const suggestion = document.getElementById('autocomplete-suggestion');
        if (suggestion) suggestion.remove();
      }
    } else {
      // Check for autocomplete
      const cmd = input.value.trim().toLowerCase();
      currentSuggestion = autocompleteSuggestions[cmd] || '';
      showAutocomplete();
    }
  });
  
  document.getElementById('term-wrapper').addEventListener('click', () => input.focus());
  
  // Boot sequence
  setTimeout(() => {
    const bootLine1 = document.createElement('div');
    bootLine1.style.cssText = 'color: var(--base0B); margin-top: 0.5rem;';
    bootLine1.textContent = '> System initialized';
    output.appendChild(bootLine1);

    const bootLine2 = document.createElement('div');
    bootLine2.style.cssText = 'color: var(--base0B);';
    bootLine2.textContent = `> Database loaded: ${db.subjects.length} subjects`;
    output.appendChild(bootLine2);

    const bootLine3 = document.createElement('div');
    bootLine3.style.cssText = 'color: var(--base0B);';
    bootLine3.textContent = `> Classification levels: ${db.classifications.join(', ')}`;
    output.appendChild(bootLine3);
    
    output.scrollTop = output.scrollHeight;
  }, 500);
</script>

<style>
  @keyframes glitch {
    0% { transform: translateX(0); filter: hue-rotate(0deg); }
    25% { transform: translateX(-2px); filter: hue-rotate(90deg); }
    50% { transform: translateX(2px); filter: hue-rotate(180deg); }
    75% { transform: translateX(-1px); filter: hue-rotate(270deg); }
    100% { transform: translateX(0); filter: hue-rotate(360deg); }
  }
  
  @keyframes matrixRain {
    0% { filter: hue-rotate(0deg) brightness(1); }
    50% { filter: hue-rotate(120deg) brightness(1.5); }
    100% { filter: hue-rotate(0deg) brightness(1); }
  }
  
  #term-wrapper {
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
    transition: box-shadow 0.3s ease;
  }
  
  #term-wrapper:hover {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  }
  
  #term-input::placeholder { 
    color: var(--base04); 
  }
  
  #term-output {
    font-size: clamp(0.875rem, 1.2vw, 1rem);
  }
  
  #term-input {
    font-size: clamp(0.875rem, 1.2vw, 1rem);
  }
  
  /* Pulldown mode animation */
  #term-wrapper.pulldown {
    animation: pulldownSlide 0.3s ease-out;
  }
  
  @keyframes pulldownSlide {
    from {
      transform: translateY(-100%);
    }
    to {
      transform: translateY(0);
    }
  }
</style>
